### 小智精灵

##### 文件内容

小智精灵

​				模块代码

​								AnalogRead

​								DS1302_Memory

​								SimpleTime

​								TM1637Test

​								UART

​				外壳

​						小智精灵 v19.stl		（前壳）

​						小智精灵 v21.stl		（后盖）

​				总代码

​								node1				（台灯）

​								node2				（客厅灯）

​								WiFiMeshv1_1  （小智精灵ESP32-C3）

​								SU-03T			   （离线语音SU-03T烧录固件，烧录工具，烧录教程）

##### 	语音控制

![微信截图_20230427223057](%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20230427223057.png)						

![image-20230428141253449](image-20230428141253449.png)

![image-20230428141308795](image-20230428141308795.png)

![image-20230428141345707](image-20230428141345707.png)





##### 模块测试记录

光敏获取当前光照强度，其中使用ADC，

​		光强：844（613mv）

​		光弱：1850（1274mv）

​		黑暗：4095（2853mv）

获取当前时间

​						1.DS1302设置时间，其中使用到DS1302库   

数据格式：

```
10:37:50.813 -> data read (20) = "what time is it"
10:37:55.790 -> 04/11/2023 10:37:31 +
```

​						2.获取网络时间，午夜12点更新时间并写入DS1302，写入前先检查是否获取到准确时间（与DS1302的时间进行对比，相差 10S内进行更新时间，否则不进行更新）    

 数据格式：

```
11:34:51.666 -> Tuesday, April 11 2023 11:34:53
```

网络时间的库获取到时间格式

```
getLocalTime(&timeinfo)；
timeinfo
```

DS1302获取时间的格式

```
RtcDateTime now = Rtc.GetDateTime();
now.Hour();
```



数码管显示，驱动芯片为TM1637，可以设置数码管的亮度，通过光敏控制此亮度

语音模块，SU-03T，通过串口来实现

```
PWM模式下，关闭电平翻转
开启：占空比100
关闭：占空比0
```

小爱同学发送的信息

```
21:27:29.147 -> MQTT接收到的主题：LED1002
21:27:29.147 -> on
21:27:29.147 -> #node1#on#

21:28:06.948 -> MQTT接收到的主题：LED1002
21:28:06.948 -> on#80
21:28:06.948 -> #node1#on#80#
```





